# Test classes with custom str/repr

class NoCustomStr {
}

class CustomStrOnly {
    [i]
    def __str(self) = '<custom-str %r>' % [self.i]
}

class CustomReprOnly {
    [i]
    def __repr(self) = '<custom-repr %r>' % [self.i]
}

class CustomReprAndStr {
    [i]
    def __repr(self) = '<xrepr %r>' % [self.i]
    def __str(self) = '<xstr %r>' % [self.i]
}

def __test_str() {
    x = NoCustomStr()
    assert_eq(str(x), '<%s::NoCustomStr instance>' % [__name])
    assert_eq(repr(x), str(x))

    x = CustomStrOnly(42)
    assert_eq(str(x), '<custom-str 42>')
    assert_eq(repr(x), '<%s::CustomStrOnly instance>' % [__name])

    x = CustomReprOnly(123)
    assert_eq(repr(x), str(x))
    assert_eq(str(x), '<custom-repr 123>')

    x = CustomReprAndStr(777)
    assert_eq(str(x), '<xstr 777>')
    assert_eq(repr(x), '<xrepr 777>')
}

def __test_chars() {
    assert_eq('hello'.chars(), ['h', 'e', 'l', 'l', 'o'])
}
